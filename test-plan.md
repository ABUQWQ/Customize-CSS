# CSS自定义器测试计划

## 测试环境

### 浏览器兼容性测试
- Google Chrome (最新版)
- Mozilla Firefox (最新版)
- Microsoft Edge (最新版)
- Safari (最新版)
- Opera (最新版)

### 设备兼容性测试
- 桌面设备 (Windows, macOS, Linux)
- 移动设备 (iOS, Android)
- 平板设备 (iPad, Android平板)

## 功能测试用例

### 1. 基本功能测试

| 测试ID | 测试描述 | 测试步骤 | 预期结果 | 状态 |
|--------|----------|----------|----------|------|
| BF-001 | 打开CSS自定义器 | 1. 在任意网页上按下Alt+C<br>2. 点击Tampermonkey菜单中的"CSS自定义器" | CSS自定义器对话框应该打开，显示编辑器界面 | 待测试 |
| BF-002 | 应用CSS样式 | 1. 打开CSS自定义器<br>2. 在编辑器中输入有效的CSS<br>3. 点击"保存"按钮 | CSS样式应该应用到当前网页，对话框关闭 | 待测试 |
| BF-003 | 预览CSS样式 | 1. 打开CSS自定义器<br>2. 在编辑器中输入有效的CSS<br>3. 点击"预览"按钮 | CSS样式应该临时应用到当前网页，对话框保持打开 | 待测试 |
| BF-004 | 撤销CSS更改 | 1. 应用CSS样式<br>2. 打开CSS自定义器<br>3. 点击"撤销"按钮 | 应该恢复到上一个CSS样式 | 待测试 |
| BF-005 | 重做CSS更改 | 1. 撤销CSS更改<br>2. 打开CSS自定义器<br>3. 点击"重做"按钮 | 应该重新应用被撤销的CSS样式 | 待测试 |
| BF-006 | 重置CSS样式 | 1. 应用CSS样式<br>2. 打开CSS自定义器<br>3. 点击"重置"按钮<br>4. 确认重置 | 所有CSS样式应该被移除 | 待测试 |

### 2. 预设管理测试

| 测试ID | 测试描述 | 测试步骤 | 预期结果 | 状态 |
|--------|----------|----------|----------|------|
| PM-001 | 使用预设样式 | 1. 打开CSS自定义器<br>2. 从预设下拉菜单中选择一个预设 | 预设CSS应该显示在编辑器中 | 待测试 |
| PM-002 | 保存为预设 | 1. 打开CSS自定义器<br>2. 在编辑器中输入CSS<br>3. 点击"保存为预设"按钮<br>4. 输入预设名称 | 新预设应该被保存并出现在预设列表中 | 待测试 |
| PM-003 | 添加新预设 | 1. 打开CSS自定义器<br>2. 切换到"预设管理"标签页<br>3. 输入预设名称和CSS<br>4. 点击"添加预设"按钮 | 新预设应该被添加到预设列表中 | 待测试 |
| PM-004 | 编辑预设 | 1. 打开CSS自定义器<br>2. 切换到"预设管理"标签页<br>3. 在预设列表中点击"编辑"按钮<br>4. 修改预设名称和CSS<br>5. 确认修改 | 预设应该被更新 | 待测试 |
| PM-005 | 删除预设 | 1. 打开CSS自定义器<br>2. 切换到"预设管理"标签页<br>3. 在预设列表中点击"删除"按钮<br>4. 确认删除 | 预设应该从列表中移除 | 待测试 |
| PM-006 | 应用预设 | 1. 打开CSS自定义器<br>2. 切换到"预设管理"标签页<br>3. 在预设列表中点击"应用"按钮 | 预设CSS应该应用到当前网页，对话框关闭 | 待测试 |

### 3. 历史记录测试

| 测试ID | 测试描述 | 测试步骤 | 预期结果 | 状态 |
|--------|----------|----------|----------|------|
| HR-001 | 查看历史记录 | 1. 应用多个不同的CSS样式<br>2. 打开CSS自定义器<br>3. 切换到"历史记录"标签页 | 应该显示之前应用的CSS样式列表 | 待测试 |
| HR-002 | 恢复历史记录 | 1. 打开CSS自定义器<br>2. 切换到"历史记录"标签页<br>3. 点击一个历史记录项 | 应该恢复到选中的历史CSS样式 | 待测试 |
| HR-003 | 导航历史记录 | 1. 打开CSS自定义器<br>2. 切换到"历史记录"标签页<br>3. 点击"上一个"和"下一个"按钮 | 应该在历史记录中前后导航 | 待测试 |
| HR-004 | 清空历史记录 | 1. 打开CSS自定义器<br>2. 切换到"历史记录"标签页<br>3. 点击"清空历史"按钮<br>4. 确认清空 | 历史记录应该被清空 | 待测试 |

### 4. 设置测试

| 测试ID | 测试描述 | 测试步骤 | 预期结果 | 状态 |
|--------|----------|----------|----------|------|
| ST-001 | 切换主题 | 1. 打开CSS自定义器<br>2. 点击主题切换按钮 | 界面应该在亮色和暗色主题之间切换 | 待测试 |
| ST-002 | 网站特定配置 | 1. 打开CSS自定义器<br>2. 切换到"设置"标签页<br>3. 启用"为每个网站保存不同的CSS配置"<br>4. 应用CSS样式<br>5. 访问不同网站<br>6. 应用不同CSS样式<br>7. 返回第一个网站 | 每个网站应该保持其特定的CSS样式 | 待测试 |
| ST-003 | 导出配置 | 1. 保存一些预设和CSS样式<br>2. 打开CSS自定义器<br>3. 切换到"设置"标签页<br>4. 点击"导出配置"按钮 | 配置应该被导出为JSON文件并下载 | 待测试 |
| ST-004 | 导入配置 | 1. 打开CSS自定义器<br>2. 切换到"设置"标签页<br>3. 在导入框中粘贴有效的JSON配置<br>4. 点击"导入配置"按钮 | 配置应该被导入，页面应该刷新以应用新配置 | 待测试 |

### 5. 高级功能测试

| 测试ID | 测试描述 | 测试步骤 | 预期结果 | 状态 |
|--------|----------|----------|----------|------|
| AF-001 | CSS选择器范围限定 | 1. 打开CSS自定义器<br>2. 在"CSS选择器范围"字段中输入".article-content"<br>3. 输入CSS样式<br>4. 点击"保存"按钮 | CSS样式应该只应用到具有article-content类的元素 | 待测试 |
| AF-002 | CSS代码高亮 | 1. 打开CSS自定义器<br>2. 在编辑器中输入CSS代码 | CSS代码应该根据语法进行高亮显示 | 待测试 |
| AF-003 | 快捷键支持 | 1. 打开CSS自定义器<br>2. 使用Ctrl+S保存CSS<br>3. 使用Ctrl+P预览CSS<br>4. 使用Esc关闭对话框 | 快捷键应该正常工作 | 待测试 |
| AF-004 | iframe处理 | 1. 访问包含iframe的网页<br>2. 打开CSS自定义器<br>3. 应用CSS样式 | CSS样式应该应用到主页面和同源iframe | 待测试 |

## 性能测试

| 测试ID | 测试描述 | 测试步骤 | 预期结果 | 状态 |
|--------|----------|----------|----------|------|
| PT-001 | 启动性能 | 1. 在不同大小的网页上按Alt+C打开CSS自定义器 | 对话框应该在1秒内打开 | 待测试 |
| PT-002 | CSS应用性能 | 1. 打开CSS自定义器<br>2. 应用复杂的CSS样式到大型网页 | CSS应该在1秒内应用，不造成明显卡顿 | 待测试 |
| PT-003 | 内存使用 | 1. 长时间使用脚本<br>2. 多次打开和关闭对话框<br>3. 应用多个不同的CSS样式 | 脚本不应造成明显的内存泄漏 | 待测试 |

## 安全测试

| 测试ID | 测试描述 | 测试步骤 | 预期结果 | 状态 |
|--------|----------|----------|----------|------|
| ST-001 | CSS注入防护 | 1. 尝试输入包含潜在危险属性的CSS<br>2. 点击"保存"按钮 | 危险属性应该被过滤掉 | 待测试 |
| ST-002 | 数据存储安全 | 1. 检查脚本存储的数据 | 数据应该只存储在用户的本地浏览器中 | 待测试 |

## 已知问题和限制

1. 跨域iframe中的CSS无法应用（浏览器安全限制）
2. 某些网站可能使用CSP（内容安全策略）阻止脚本注入样式
3. 在动态加载内容的网站上，可能需要多次应用CSS

## 测试结果记录

| 测试ID | 测试日期 | 测试环境 | 测试结果 | 问题描述 | 修复状态 |
|--------|----------|----------|----------|----------|----------|
|        |          |          |          |          |          |
