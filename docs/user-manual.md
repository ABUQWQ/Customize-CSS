# 用户使用手册

## 目录

1. [简介](#简介)
2. [快速开始](#快速开始)
3. [界面概述](#界面概述)
4. [基本功能](#基本功能)
5. [高级功能](#高级功能)
6. [快捷键](#快捷键)
7. [常见问题](#常见问题)
8. [故障排除](#故障排除)

## 简介

CSS自定义器是一个功能强大的浏览器用户脚本，允许您自定义网页的CSS样式，以创建更舒适的浏览体验。无论您是想改变字体、调整颜色，还是完全重新设计网页外观，CSS自定义器都能满足您的需求。

主要特点：
- 现代化UI界面，支持暗黑模式
- CSS预设管理系统
- 历史记录功能
- CSS选择器范围限定
- 代码高亮和格式化
- 导入/导出配置
- 网站特定CSS配置
- 快捷键支持

## 快速开始

### 打开CSS自定义器

有两种方式可以打开CSS自定义器：
1. 按下`Alt+C`快捷键
2. 点击Tampermonkey菜单中的"CSS自定义器"选项

### 应用简单的CSS样式

1. 打开CSS自定义器
2. 在CSS编辑器中输入您想要的CSS样式，例如：
   ```css
   font-family: "Arial", sans-serif;
   font-size: 18px;
   line-height: 1.6;
   ```
3. 点击"预览"按钮查看效果
4. 满意后，点击"保存"按钮应用样式

### 使用预设样式

1. 打开CSS自定义器
2. 从"预设样式"下拉菜单中选择一个预设
3. 点击"保存"按钮应用预设样式

## 界面概述

CSS自定义器的界面分为四个主要标签页：

### 编辑器标签页

![编辑器界面](../screenshots/editor.png)

- **CSS选择器范围**：指定CSS应用的元素范围
- **预设样式**：预设样式下拉菜单
- **自定义CSS**：CSS代码编辑器
- **预览**：临时应用CSS样式
- **保存**：永久应用CSS样式
- **保存为预设**：将当前CSS保存为预设
- **撤销**：恢复到上一个CSS样式
- **重做**：重新应用被撤销的CSS样式
- **重置**：移除所有自定义CSS样式

### 预设管理标签页

![预设管理界面](../screenshots/presets.png)

- **预设名称**：新预设的名称输入框
- **预设CSS**：新预设的CSS编辑器
- **添加预设**：创建新预设
- **预设列表**：已保存预设的列表
  - **应用**：应用选中的预设
  - **编辑**：修改预设
  - **删除**：删除预设

### 历史记录标签页

![历史记录界面](../screenshots/history.png)

- **上一个**：导航到上一个历史记录
- **下一个**：导航到下一个历史记录
- **清空历史**：删除所有历史记录
- **历史列表**：之前应用的CSS样式列表

### 设置标签页

![设置界面](../screenshots/settings.png)

- **网站特定配置**：为每个网站保存不同的CSS配置
- **导出配置**：将所有配置导出为JSON文件
- **导入配置**：从JSON文件导入配置
- **快捷键**：可用快捷键列表
- **关于**：版本信息和链接

## 基本功能

### 编辑和应用CSS

1. 在编辑器中输入CSS代码
2. 使用"预览"按钮查看效果
3. 使用"保存"按钮应用CSS

CSS编辑器支持语法高亮，使编辑更加直观。您可以输入任何有效的CSS属性，例如：

```css
color: #333;
background-color: #f5f5f5;
font-family: "Roboto", sans-serif;
font-size: 16px;
line-height: 1.6;
letter-spacing: 0.5px;
```

### 使用CSS选择器

默认情况下，CSS应用于所有元素（使用`*`选择器）。您可以通过更改"CSS选择器范围"来限制CSS的应用范围：

- `*` - 应用于所有元素
- `body` - 仅应用于body元素及其子元素
- `.content` - 仅应用于具有"content"类的元素
- `#main-article` - 仅应用于ID为"main-article"的元素
- `p, h1, h2` - 应用于段落和标题元素

### 管理预设

#### 使用预设

1. 从"预设样式"下拉菜单中选择一个预设
2. 点击"保存"按钮应用预设

#### 创建新预设

方法一：
1. 在编辑器中输入CSS
2. 点击"保存为预设"按钮
3. 输入预设名称

方法二：
1. 切换到"预设管理"标签页
2. 输入预设名称和CSS
3. 点击"添加预设"按钮

#### 编辑预设

1. 切换到"预设管理"标签页
2. 在预设列表中找到要编辑的预设
3. 点击"编辑"按钮
4. 修改预设名称和CSS
5. 确认修改

#### 删除预设

1. 切换到"预设管理"标签页
2. 在预设列表中找到要删除的预设
3. 点击"删除"按钮
4. 确认删除

### 使用历史记录

#### 查看历史记录

1. 切换到"历史记录"标签页
2. 浏览历史CSS样式列表

#### 恢复历史样式

方法一：
1. 切换到"历史记录"标签页
2. 点击要恢复的历史记录项

方法二：
1. 使用"撤销"和"重做"按钮在历史记录中导航

#### 清空历史记录

1. 切换到"历史记录"标签页
2. 点击"清空历史"按钮
3. 确认清空

## 高级功能

### 暗黑模式

CSS自定义器支持暗黑模式界面：

1. 点击对话框右上角的主题切换按钮
2. 界面将在亮色和暗色主题之间切换

### 网站特定配置

您可以为不同的网站保存不同的CSS配置：

1. 切换到"设置"标签页
2. 启用"为每个网站保存不同的CSS配置"选项
3. 为每个网站应用不同的CSS样式
4. 当您再次访问这些网站时，将自动应用相应的CSS样式

### 导入/导出配置

#### 导出配置

1. 切换到"设置"标签页
2. 点击"导出配置"按钮
3. 配置将被导出为JSON文件并下载

#### 导入配置

1. 切换到"设置"标签页
2. 在导入框中粘贴有效的JSON配置
3. 点击"导入配置"按钮
4. 页面将刷新以应用新配置

### CSS代码高亮和格式化

CSS编辑器支持语法高亮，使您能够更轻松地编辑CSS代码。编辑器还支持基本的代码格式化功能：

- 使用Tab键添加缩进（插入两个空格）
- 自动识别CSS属性和值
- 不同颜色显示不同类型的CSS元素

## 快捷键

CSS自定义器支持以下快捷键：

| 快捷键 | 功能 |
|--------|------|
| Alt+C | 打开CSS自定义器 |
| Ctrl+S | 保存CSS样式 |
| Ctrl+P | 预览CSS样式 |
| Ctrl+Z | 撤销更改 |
| Ctrl+Y | 重做更改 |
| Esc | 关闭对话框 |

## 常见问题

### CSS样式没有应用到某些元素

可能的原因：
- 元素不匹配您指定的CSS选择器
- 网站使用了更高优先级的CSS规则
- 元素在iframe中，且iframe跨域

解决方案：
- 尝试使用更具体的CSS选择器
- 在CSS中添加`!important`标记
- 对于跨域iframe，目前没有解决方案（浏览器安全限制）

### CSS样式在页面刷新后消失

可能的原因：
- CSS样式没有正确保存
- Tampermonkey存储出现问题

解决方案：
- 确保点击"保存"按钮而不是"预览"按钮
- 检查Tampermonkey是否有权限存储数据
- 导出您的配置作为备份

### 预设无法保存

可能的原因：
- 预设名称为空
- CSS内容为空
- 存储空间已满

解决方案：
- 确保输入有效的预设名称和CSS内容
- 删除不需要的预设以释放空间
- 导出配置，清空所有预设，然后导入必要的预设

## 故障排除

### 脚本不响应

1. 检查Tampermonkey是否已启用
2. 刷新页面
3. 重启浏览器
4. 重新安装脚本

### 界面显示异常

1. 切换主题（可能是主题渲染问题）
2. 刷新页面
3. 清除浏览器缓存
4. 重新安装脚本

### 配置丢失

1. 尝试导入之前导出的配置
2. 检查浏览器的存储设置
3. 确保没有清除浏览器数据

---

如果您遇到本手册未涵盖的问题，请在[GitHub Issues](https://github.com/username/css-customizer/issues)提交问题，或发送邮件至example@example.com获取支持。
